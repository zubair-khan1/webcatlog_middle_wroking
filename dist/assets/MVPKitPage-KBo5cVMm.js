import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as l,L as O,z as H,ap as R,y as U,Z as S,a3 as M,aq as D,ar as X,q as z,as as Z,at as G,w as K,ao as J,au as Q,av as W,aw as Y}from"./vendor-icons-BBHJ0ezg.js";import{b as ee,B as C,s as I}from"./index-76QHltB_.js";import{I as se}from"./InquiryModal-C5B8ZUK8.js";import{e as te,u as ae}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";import"./useSellerInquiries-wR5RBeOa.js";const pe=()=>{var p,h,u,g,f,j;const{id:c}=te(),n=ae(),{isAuthenticated:L}=ee(),[s,P]=l.useState(null),[q,F]=l.useState(!0),[d,$]=l.useState(0),[A,x]=l.useState(!1),[E,m]=l.useState(!1);if(l.useEffect(()=>{window.scrollTo(0,0),(async()=>{var t,b,N,y,v,_,w;if(c)try{const{data:a,error:k}=await I.from("listings").select(`
            *,
            creator:profiles!listings_creator_id_fkey(
              id, full_name, avatar_url, is_verified_seller, 
              seller_level, rating_average, rating_count, total_sales
            ),
            category:categories(title)
          `).eq("id",c).single();if(k)throw k;const B={...a,image:a.image_url,techStack:a.tech_stack||[],creator:{id:(t=a.creator)==null?void 0:t.id,name:((b=a.creator)==null?void 0:b.full_name)||"Creator",avatar:(N=a.creator)==null?void 0:N.avatar_url,verified:((y=a.creator)==null?void 0:y.is_verified_seller)||!1,rating:((v=a.creator)==null?void 0:v.rating_average)||0,ratingCount:((_=a.creator)==null?void 0:_.rating_count)||0,totalSales:((w=a.creator)==null?void 0:w.total_sales)||0}};P(B),I.from("listings").update({views_count:(a.views_count||0)+1}).eq("id",c)}catch(a){console.error("Error fetching listing:",a)}finally{F(!1)}})()},[c]),q)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:e.jsx(O,{className:"animate-spin text-accent-primary",size:32})});if(!s)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background text-center px-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-textMain mb-4",children:"Product Not Found"}),e.jsx(C,{onClick:()=>n("/"),children:"Return Home"})]});const o=[s.image,...s.screenshot_urls||[]].filter(Boolean),T=`${s.currency==="USD"?"$":"₹"}${(p=s.price)==null?void 0:p.toLocaleString()}`,i=s.demo_video_url||s.video_url,V=()=>{if(!L){n("/signin");return}n(`/checkout/${s.id}`)};return e.jsxs("div",{className:"min-h-screen bg-background pt-24 pb-20",children:[e.jsx(se,{isOpen:E,onClose:()=>m(!1),listingId:s.id,listingTitle:s.title,sellerId:s.creator.id,sellerName:s.creator.name,sellerVerified:s.creator.verified}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6",children:[e.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-textSecondary hover:text-textMain mb-6 transition",children:[e.jsx(H,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[e.jsx("span",{className:"px-3 py-1 text-xs font-mono uppercase bg-accent-primary/10 text-accent-primary rounded-full",children:((h=s.category)==null?void 0:h.title)||s.category}),s.product_stage&&e.jsx("span",{className:`px-3 py-1 text-xs font-mono uppercase rounded-full ${s.product_stage==="production"?"bg-green-500/10 text-green-500":s.product_stage==="experimental"?"bg-orange-500/10 text-orange-500":"bg-blue-500/10 text-blue-500"}`,children:s.product_stage.toUpperCase()})]}),e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-display font-bold text-textMain mb-4 tracking-tight",children:s.title}),(s.tagline||s.short_summary)&&e.jsx("p",{className:"text-lg md:text-xl text-textSecondary max-w-3xl leading-relaxed",children:s.tagline||s.short_summary})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-12",children:[o.length>0&&e.jsxs("section",{children:[e.jsx("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-surfaceHighlight border border-border shadow-soft",children:A&&i?e.jsx("iframe",{src:i.includes("youtube")?`https://www.youtube.com/embed/${(u=i.split("v=")[1])==null?void 0:u.split("&")[0]}?autoplay=1`:i,className:"w-full h-full",allowFullScreen:!0,allow:"autoplay"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:o[d],alt:s.title,className:"w-full h-full object-cover"}),i&&e.jsx("button",{onClick:()=>x(!0),className:"absolute inset-0 flex items-center justify-center bg-black/30 hover:bg-black/40 transition group",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition",children:e.jsx(R,{size:28,className:"text-slate-900 ml-1"})})})]})}),o.length>1&&e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2",children:o.map((r,t)=>e.jsx("button",{onClick:()=>{$(t),x(!1)},className:`flex-shrink-0 w-20 h-14 rounded-lg overflow-hidden border-2 transition ${t===d?"border-accent-primary":"border-transparent opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:r,alt:"",className:"w-full h-full object-cover"})},t))})]}),(s.executive_summary||s.description)&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-xl font-bold text-textMain mb-4 flex items-center gap-2",children:[e.jsx(U,{size:20,className:"text-accent-primary"}),"Overview"]}),e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-textSecondary leading-relaxed text-lg",children:s.executive_summary||s.description})})]}),s.problem_it_solves&&e.jsxs("section",{className:"p-6 rounded-xl bg-surfaceHighlight border border-border",children:[e.jsx("h3",{className:"text-base font-bold text-textMain mb-3",children:"The Problem"}),e.jsx("p",{className:"text-textSecondary leading-relaxed",children:s.problem_it_solves})]}),e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.features&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-textMain mb-4 flex items-center gap-2",children:[e.jsx(S,{size:18,className:"text-accent-primary"}),"Core Features"]}),e.jsx("ul",{className:"space-y-3",children:s.features.split(`
`).filter(r=>r.trim()).map((r,t)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(M,{size:18,className:"text-green-500 mt-0.5 shrink-0"}),e.jsx("span",{className:"text-textSecondary",children:r.replace(/^[•\-]\s*/,"")})]},t))})]}),s.techStack&&s.techStack.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-textMain mb-4 flex items-center gap-2",children:[e.jsx(D,{size:18,className:"text-accent-primary"}),"Tech Stack"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.techStack.map((r,t)=>e.jsx("span",{className:"px-3 py-1.5 text-sm font-medium bg-surface border border-border rounded-lg text-textMain",children:r},t))})]})]}),(((g=s.perfect_for)==null?void 0:g.length)||((f=s.not_for)==null?void 0:f.length))&&e.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.perfect_for&&s.perfect_for.length>0&&e.jsxs("div",{className:"p-6 rounded-xl bg-green-500/5 border border-green-500/20",children:[e.jsxs("h3",{className:"text-base font-bold text-green-600 dark:text-green-400 mb-4 flex items-center gap-2",children:[e.jsx(M,{size:18}),"Perfect For"]}),e.jsx("ul",{className:"space-y-2",children:s.perfect_for.map((r,t)=>e.jsxs("li",{className:"text-sm text-textSecondary flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),r]},t))})]}),s.not_for&&s.not_for.length>0&&e.jsxs("div",{className:"p-6 rounded-xl bg-red-500/5 border border-red-500/20",children:[e.jsxs("h3",{className:"text-base font-bold text-red-600 dark:text-red-400 mb-4 flex items-center gap-2",children:[e.jsx(X,{size:18}),"Not For"]}),e.jsx("ul",{className:"space-y-2",children:s.not_for.map((r,t)=>e.jsxs("li",{className:"text-sm text-textSecondary flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),r]},t))})]})]})]}),e.jsx("div",{className:"lg:col-span-4 space-y-6",children:e.jsxs("div",{className:"sticky top-24 space-y-6",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 shadow-soft",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("span",{className:"text-3xl font-bold text-textMain font-mono",children:T}),s.pricing_type==="subscription"&&e.jsx("span",{className:"text-textSecondary text-sm ml-2",children:"/month"}),s.pricing_type==="one-time"&&e.jsx("span",{className:"text-textMuted text-sm ml-2",children:"one-time"})]}),s.license_type&&e.jsxs("div",{className:"flex items-center gap-2 mb-6 text-sm",children:[e.jsx(z,{size:16,className:"text-accent-primary"}),e.jsxs("span",{className:"text-textSecondary capitalize",children:[s.license_type," License"]})]}),e.jsxs(C,{className:"w-full mb-4 gap-2",onClick:V,children:[e.jsx(Z,{size:18}),"Get Access"]}),e.jsx("button",{onClick:()=>m(!0),className:"w-full py-2.5 text-sm font-medium text-textSecondary hover:text-textMain transition",children:"Contact Seller"}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border space-y-4",children:[s.setup_time&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-textMuted flex items-center gap-2",children:[e.jsx(G,{size:14}),"Setup Time"]}),e.jsx("span",{className:"text-textMain font-medium",children:s.setup_time})]}),s.complexity_level&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-textMuted flex items-center gap-2",children:[e.jsx(S,{size:14}),"Complexity"]}),e.jsx("span",{className:"text-textMain font-medium capitalize",children:s.complexity_level})]}),s.support_level&&s.support_level!=="none"&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-textMuted flex items-center gap-2",children:[e.jsx(K,{size:14}),"Support"]}),e.jsx("span",{className:"text-textMain font-medium capitalize",children:s.support_level})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border space-y-3",children:[s.has_refund_policy&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(J,{size:14}),e.jsx("span",{children:"14-day refund policy"})]}),s.has_maintenance_commitment&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 dark:text-green-400",children:[e.jsx(z,{size:14}),e.jsx("span",{children:"6-month maintenance"})]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.creator.avatar?e.jsx("img",{src:s.creator.avatar,alt:s.creator.name,className:"w-12 h-12 rounded-full object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-accent-primary font-bold text-lg",children:(j=s.seller_display_name||s.creator.name)==null?void 0:j.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-textMain flex items-center gap-2",children:[s.seller_display_name||s.creator.name,s.creator.verified&&e.jsx(Q,{size:14,className:"text-accent-primary"})]}),s.seller_experience_level&&e.jsxs("p",{className:"text-xs text-textMuted capitalize",children:[s.seller_experience_level," Developer"]})]})]}),s.seller_bio&&e.jsx("p",{className:"text-sm text-textSecondary mb-4 leading-relaxed",children:s.seller_bio}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-textMuted",children:[s.seller_prior_projects!==void 0&&s.seller_prior_projects>0&&e.jsxs("span",{children:[s.seller_prior_projects," projects"]}),s.creator.rating>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(W,{size:12,className:"text-yellow-500 fill-yellow-500"}),s.creator.rating.toFixed(1)]})]}),s.seller_portfolio_url&&e.jsxs("a",{href:s.seller_portfolio_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 mt-4 text-sm text-accent-primary hover:underline",children:[e.jsx(Y,{size:14}),"View Portfolio"]})]})]})})]})]})]})};export{pe as default};
