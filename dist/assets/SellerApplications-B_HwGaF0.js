import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as b,x as m,U as j,b3 as f,i as v,ay as N,aw as p,a$ as y,K as w,ar as k}from"./vendor-icons-BBHJ0ezg.js";import{u as M}from"./useAdminUsers-MwbvnzeU.js";import{s as _}from"./index-76QHltB_.js";import"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const S=({user:r,data:s,onApprove:o,onReject:x,isProcessing:n})=>{var t,a,i,c,h;const[l,d]=b.useState(!1);return e.jsxs("div",{className:"bg-surface border border-border rounded-xl overflow-hidden mb-4 transition-all hover:shadow-md",children:[e.jsxs("div",{className:"p-6 flex items-center justify-between cursor-pointer hover:bg-surfaceHighlight/50",onClick:()=>d(!l),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-surfaceHighlight flex items-center justify-center text-textMuted",children:r.avatar_url?e.jsx("img",{src:r.avatar_url,alt:"",className:"w-full h-full rounded-full object-cover"}):e.jsx(j,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-textMain text-lg",children:r.full_name||"Unknown User"}),e.jsx("p",{className:"text-sm text-textMuted",children:r.email})]}),e.jsx("div",{className:"h-8 w-px bg-border mx-2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-accent-primary/10 text-accent-primary border border-accent-primary/20 uppercase tracking-wide",children:((t=s.productType)==null?void 0:t.replace(/_/g," "))||"Unknown Type"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-surfaceHighlight text-textMuted border border-border uppercase tracking-wide",children:s.applicantType||"Unknown Applicant"})]}),e.jsxs("p",{className:"text-xs text-textSecondary",children:["Applied: ",r.seller_applied_at?new Date(r.seller_applied_at).toLocaleDateString():"Just now"]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:l?e.jsx(f,{size:20,className:"text-textMuted"}):e.jsx(v,{size:20,className:"text-textMuted"})})]}),l&&e.jsxs("div",{className:"border-t border-border bg-surfaceHighlight/5 p-6 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-textMuted uppercase mb-2",children:"Intent"}),e.jsx("p",{className:"text-textMain",children:s.applicationIntent==="earn"?"Earn from existing projects":s.applicationIntent==="validate"?"Validate an idea":"Share production-ready SaaS"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-textMuted uppercase mb-2",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(a=s.techStack)==null?void 0:a.split(",").map((u,g)=>e.jsx("span",{className:"px-2 py-1 bg-surface border border-border rounded text-xs font-mono text-textSecondary",children:u.trim()},g))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-textMuted uppercase mb-2",children:"Description"}),e.jsx("p",{className:"text-textSecondary text-sm leading-relaxed bg-surface p-4 rounded-lg border border-border",children:s.description})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-textMuted uppercase mb-3",children:"Links"}),e.jsxs("div",{className:"space-y-2",children:[((i=s.links)==null?void 0:i.website)&&e.jsxs("a",{href:s.links.website,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-sm text-accent-primary hover:underline",children:[e.jsx(N,{size:14})," Website: ",s.links.website," ",e.jsx(p,{size:10})]}),((c=s.links)==null?void 0:c.demo)&&e.jsxs("a",{href:s.links.demo,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-sm text-accent-primary hover:underline",children:[e.jsx(y,{size:14})," Demo: ",s.links.demo," ",e.jsx(p,{size:10})]}),((h=s.links)==null?void 0:h.github)&&e.jsxs("a",{href:s.links.github,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-sm text-accent-primary hover:underline",children:[e.jsx(w,{size:14})," GitHub: ",s.links.github," ",e.jsx(p,{size:10})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-textMuted uppercase mb-3",children:"Declarations"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-500 bg-green-500/5 p-3 rounded-lg border border-green-500/10",children:[e.jsx(m,{size:16}),e.jsx("span",{children:"User confirms 100% ownership of rights."})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-border",children:[e.jsxs("button",{onClick:()=>x(r.id),disabled:n,className:"px-6 py-2.5 rounded-lg border border-red-500/20 text-red-500 hover:bg-red-500/10 font-bold text-sm transition-colors flex items-center gap-2",children:[e.jsx(k,{size:18}),"Reject Application"]}),e.jsxs("button",{onClick:()=>o(r.id),disabled:n,className:"px-6 py-2.5 rounded-lg bg-green-500 text-white hover:bg-green-600 font-bold text-sm transition-colors shadow-lg hover:shadow-xl flex items-center gap-2",children:[e.jsx(m,{size:18}),"Approve Seller Account"]})]})]})]})},H=()=>{const{users:r,isLoading:s,refetch:o}=M(),[x,n]=b.useState(null),l=r.filter(t=>t.seller_status==="pending"),d=async(t,a)=>{if(confirm(`Are you sure you want to ${a} this applicant?`)){n(t);try{const i={seller_status:a==="approved"?"approved":"rejected",seller_reviewed_at:new Date().toISOString()};a==="approve"&&(i.is_seller=!0,i.role="seller");const{error:c}=await _.from("profiles").update(i).eq("id",t);if(c)throw c;await o()}catch(i){console.error("Error processing application:",i),alert("Failed to process application")}finally{n(null)}}};return s?e.jsx("div",{className:"p-10 text-center text-textMuted",children:"Loading applications..."}):e.jsxs("div",{className:"space-y-8 animate-fade-in max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"Seller Applications"}),e.jsx("p",{className:"text-textMuted",children:"Review and approve new seller requests."})]}),e.jsxs("div",{className:"px-4 py-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20 text-accent-primary font-bold",children:[l.length," Pending"]})]}),l.length===0?e.jsxs("div",{className:"text-center py-20 bg-surface border border-border rounded-xl",children:[e.jsx(m,{size:48,className:"text-green-500 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl font-bold text-textMain mb-2",children:"All Caught Up!"}),e.jsx("p",{className:"text-textMuted",children:"No pending applications to review."})]}):e.jsx("div",{className:"space-y-4",children:l.map(t=>e.jsx(S,{user:t,data:t.seller_application_data||{},onApprove:a=>d(a,"approve"),onReject:a=>d(a,"reject"),isProcessing:x===t.id},t.id))})]})};export{H as default};
