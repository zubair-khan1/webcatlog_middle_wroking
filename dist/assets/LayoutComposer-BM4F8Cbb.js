import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a,ak as m}from"./vendor-icons-BBHJ0ezg.js";import{s as p,B as u}from"./index-76QHltB_.js";import{u as h}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const _=()=>{const i=h(),[l,o]=a.useState([]),[n,d]=a.useState(!0);a.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:t,error:r}=await p.from("listings").select(`
          *,
          creator:profiles!listings_creator_id_fkey(id, full_name, avatar_url, is_verified_seller, seller_level, rating_average, rating_count, total_sales)
        `).order("created_at",{ascending:!1});if(r)throw r;const x=t.map(s=>({...s,creator:{id:s.creator.id,name:s.creator.full_name,avatar:s.creator.avatar_url,verified:s.creator.is_verified_seller,rating:s.creator.rating_average||0,ratingCount:s.creator.rating_count||0,totalSales:s.creator.total_sales||0}}));o(x)}catch(t){console.error("Error fetching listings:",t)}finally{d(!1)}};return e.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(m,{className:"text-accent-primary"})," Layout Composer"]})}),n?e.jsx("div",{children:"Loading..."}):e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-border overflow-hidden",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-surfaceHighlight border-b border-border text-xs uppercase text-textMuted font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Listing"}),e.jsx("th",{className:"p-4 text-center",children:"Status"}),e.jsx("th",{className:"p-4 text-center",children:"Current Layout"}),e.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border/50",children:l.map(t=>{var r;return e.jsxs("tr",{className:"hover:bg-surfaceHighlight/30 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-textMain",children:t.title}),e.jsx("div",{className:"text-xs text-textMuted truncate max-w-xs",children:t.id})]}),e.jsx("td",{className:"p-4 text-center",children:t.isLive?e.jsx("span",{className:"text-emerald-600 text-xs font-bold px-2 py-0.5 bg-emerald-50 rounded border border-emerald-100",children:"Live"}):e.jsx("span",{className:"text-textMuted text-xs px-2 py-0.5 bg-gray-100 rounded",children:"Draft"})}),e.jsx("td",{className:"p-4 text-sm text-textSecondary text-center",children:(r=t.layout_config)!=null&&r.preset?e.jsx("span",{className:"capitalize px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold border border-blue-100",children:t.layout_config.preset.replace("-"," ")}):"Default"}),e.jsx("td",{className:"p-4 text-right",children:e.jsx(u,{onClick:()=>i(`/admin/editor/${t.id}`),size:"sm",variant:"outline",children:"Open Visual Editor"})})]},t.id)})})]})})]})};export{_ as default};
