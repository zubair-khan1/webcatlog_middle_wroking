import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as x,I as b,z as f,s as g,A as j,aj as v,P as y}from"./vendor-icons-BBHJ0ezg.js";import{b as N,s as w}from"./index-76QHltB_.js";import{u as k,L as o}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const M=({listing:s,onClick:m})=>{const[i,l]=x.useState(0),[n,c]=x.useState(!1),r=[s.image,...s.screenshot_urls||[]].filter(Boolean),d=a=>{a.stopPropagation(),l(t=>t===0?r.length-1:t-1)},u=a=>{a.stopPropagation(),l(t=>t===r.length-1?0:t+1)},h=(a,t)=>{a.stopPropagation(),l(t)};return e.jsxs("div",{className:"group flex flex-col gap-3 cursor-pointer",onClick:()=>m(s.id),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsxs("div",{className:"relative aspect-[4/3] w-full overflow-hidden rounded-xl bg-surface border border-border group-hover:border-border/60 group-hover:shadow-lg transition-all duration-300",children:[r.length>0?e.jsx("div",{className:"relative w-full h-full",children:r.map((a,t)=>e.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${t===i?"opacity-100 z-10":"opacity-0 z-0"}`,children:e.jsx("img",{src:a,alt:`${s.title} - Preview ${t+1}`,className:"h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"})},t))}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-surfaceHighlight text-textMuted",children:e.jsx(b,{size:32})}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:`absolute left-2 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-black/50 backdrop-blur-sm text-white flex items-center justify-center transition-all duration-200 hover:bg-black/70 ${n?"opacity-100 translate-x-0":"opacity-0 -translate-x-4"}`,children:e.jsx(f,{size:16})}),e.jsx("button",{onClick:u,className:`absolute right-2 top-1/2 -translate-y-1/2 z-20 w-8 h-8 rounded-full bg-black/50 backdrop-blur-sm text-white flex items-center justify-center transition-all duration-200 hover:bg-black/70 ${n?"opacity-100 translate-x-0":"opacity-0 translate-x-4"}`,children:e.jsx(g,{size:16})}),e.jsx("div",{className:`absolute bottom-3 left-1/2 -translate-x-1/2 z-20 flex gap-1.5 transition-opacity duration-200 ${n?"opacity-100":"opacity-0"}`,children:r.slice(0,5).map((a,t)=>e.jsx("button",{onClick:p=>h(p,t),className:`w-1.5 h-1.5 rounded-full transition-all ${t===i?"bg-white scale-125":"bg-white/40 hover:bg-white/60"}`},t))})]}),e.jsx("button",{className:`absolute top-3 right-3 z-30 w-8 h-8 rounded-full bg-white text-black flex items-center justify-center transition-all duration-200 shadow-sm hover:scale-110 ${n?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"}`,onClick:a=>{a.stopPropagation()},children:e.jsx(j,{size:14,className:s.likes>0?"fill-red-500 text-red-500":""})})]}),e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-display font-medium text-textMain leading-tight truncate group-hover:text-textMain transition-colors",children:s.title}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:e.jsx("span",{className:"text-xs text-textMuted group-hover:text-textSecondary transition-colors truncate",children:s.creator.name})})]}),e.jsx("div",{className:"text-right shrink-0",children:e.jsx("span",{className:"text-md font-mono font-medium text-textMain",children:s.price===0?"Free":`$${s.price}`})})]})]})},$=()=>{const{user:s}=N(),m=k(),[i,l]=x.useState([]),[n,c]=x.useState(!0);return x.useEffect(()=>{(async()=>{if(s)try{c(!0);const{data:d,error:u}=await w.from("listings").select("*").eq("creator_id",s.id).order("created_at",{ascending:!1});if(u)throw u;l(d||[])}catch(d){console.error("Error fetching listings:",d)}finally{c(!1)}})()},[s]),e.jsxs("div",{className:"pt-24 px-6 max-w-7xl mx-auto pb-20 animate-fade-in min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-accent-primary",children:[e.jsx(o,{to:"/seller",className:"hover:underline",children:"Seller Dashboard"}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"My Listings"})]}),e.jsx("h1",{className:"text-4xl font-display font-bold text-textMain mb-2",children:"My Listings"}),e.jsx("p",{className:"text-textMuted",children:"Manage your kits and track their performance"})]}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>m("/submit"),className:"btn-primary flex items-center gap-2",children:[e.jsx(v,{size:20}),"Submit New Kit"]})})]}),e.jsxs("div",{className:"flex border-b border-border mb-8 overflow-x-auto",children:[e.jsx(o,{to:"/seller",className:"px-6 py-3 text-sm font-medium border-b-2 border-transparent text-textMuted hover:text-textMain transition-colors",children:"Overview"}),e.jsx(o,{to:"/seller/orders",className:"px-6 py-3 text-sm font-medium border-b-2 border-transparent text-textMuted hover:text-textMain transition-colors",children:"Orders"}),e.jsxs(o,{to:"/seller/listings",className:"px-6 py-3 text-sm font-medium border-b-2 border-accent-primary text-textMain transition-colors",children:["My Listings (",i.length,")"]}),e.jsx(o,{to:"/seller/payouts",className:"px-6 py-3 text-sm font-medium border-b-2 border-transparent text-textMuted hover:text-textMain transition-colors",children:"Payouts"}),e.jsx(o,{to:"/seller/bank",className:"px-6 py-3 text-sm font-medium border-b-2 border-transparent text-textMuted hover:text-textMain transition-colors",children:"Settings"})]}),n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full animate-spin"})}):i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(r=>e.jsx(M,{listing:r},r.id))}):e.jsx("div",{className:"h-[400px] flex items-center justify-center text-center border border-dashed border-border rounded-xl",children:e.jsxs("div",{children:[e.jsx(y,{size:48,className:"mx-auto mb-4 text-textMuted opacity-30"}),e.jsx("p",{className:"text-textMuted mb-4",children:"You haven't submitted any kits yet"}),e.jsx("button",{onClick:()=>m("/submit"),className:"text-accent-primary hover:underline",children:"Submit your first kit â†’"})]})})]})};export{$ as default};
