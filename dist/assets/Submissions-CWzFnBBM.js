import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as m,L as v,m as N,aP as D,D as q,aB as I,aH as T,u as M,X as y,aw as z,aY as P,aN as A,ad as $}from"./vendor-icons-BBHJ0ezg.js";import{s as u,b as C}from"./index-76QHltB_.js";import"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const U=(o={})=>{const[p,t]=m.useState([]),[x,h]=m.useState(!0),[s,c]=m.useState(null);return m.useEffect(()=>{(async()=>{try{h(!0),c(null);const{data:{user:a}}=await u.auth.getUser();if(console.log("[AdminSubmissions] Current user:",a==null?void 0:a.id,a==null?void 0:a.email),a){const{data:f}=await u.from("profiles").select("id, role, email").eq("id",a.id).single();console.log("[AdminSubmissions] User profile:",f)}let n=u.from("submissions").select("id, user_id, project_name, tagline, short_summary, live_url, category, description, features, price, tech_stack, setup_time, deliverables, perfect_for, not_for, what_buyer_gets, thumbnail_url, video_url, screenshot_urls, status, rejection_reason, reviewed_by, reviewed_at, created_at, updated_at, kit_resources(id, file_name, file_type, file_url, file_size_bytes, description, linked_deliverable, is_locked)").order("created_at",{ascending:!1});o.status&&o.status!=="all"&&(n=n.eq("status",o.status));const{data:b,error:g}=await n;if(console.log("[AdminSubmissions] Fetch result:",{data:b,fetchError:g}),g)throw g;t(b||[])}catch(a){console.error("[AdminSubmissions] Error:",a),c(a instanceof Error?a.message:"Failed to fetch submissions")}finally{h(!1)}})()},[o.status]),{submissions:p,isLoading:x,error:s,refetch:async()=>{h(!0);try{let d=u.from("submissions").select("id, user_id, project_name, tagline, short_summary, live_url, category, description, features, price, tech_stack, setup_time, deliverables, perfect_for, not_for, what_buyer_gets, thumbnail_url, video_url, screenshot_urls, status, rejection_reason, reviewed_by, reviewed_at, created_at, updated_at, kit_resources(id, file_name, file_type, file_url, file_size_bytes, description, linked_deliverable, is_locked)").order("created_at",{ascending:!1});o.status&&o.status!=="all"&&(d=d.eq("status",o.status));const{data:a,error:n}=await d;if(n)throw n;t(a||[])}catch(d){c(d instanceof Error?d.message:"Failed to refetch")}finally{h(!1)}}}},B=()=>{C();const[o,p]=m.useState(!1),[t,x]=m.useState(null);return{approveSubmission:async s=>{p(!0),x(null),console.log("[ApproveSubmission] Starting approval for:",s.id);try{let c=null;if(s.category){const{data:b}=await u.from("categories").select("id").ilike("title",s.category).single();if(b)c=b.id,console.log("[ApproveSubmission] Found existing category:",c);else{console.log("[ApproveSubmission] Creating new category:",s.category);const{data:g,error:f}=await u.from("categories").insert({title:s.category,slug:s.category.toLowerCase().replace(/\s+/g,"-"),description:`${s.category} kits and templates`}).select("id").single();if(f)throw f;c=g.id}}const{data:i,error:d}=await u.from("listings").insert({title:s.project_name,tagline:s.tagline||null,short_summary:s.short_summary||null,description:s.description,price:s.price||0,category_id:c,creator_id:s.user_id,tech_stack:Array.isArray(s.tech_stack)?s.tech_stack:s.tech_stack?s.tech_stack.split(",").map(b=>b.trim()):[],setup_time:s.setup_time||null,architecture_notes:s.architecture_notes||null,features:s.features||null,image_url:s.thumbnail_url,demo_video_url:s.video_url||null,screenshot_urls:s.screenshot_urls||null,preview_url:s.live_url,deliverables:s.deliverables||null,perfect_for:s.perfect_for||null,not_for:s.not_for||null,what_buyer_gets:s.what_buyer_gets||null,is_live:!0,is_featured:!1,moderation_status:"live"}).select("id").single();if(d)throw console.error("[ApproveSubmission] Listing create error:",d),d;console.log("[ApproveSubmission] Created listing:",i.id);const{error:a}=await u.from("submissions").update({status:"approved",reviewed_at:new Date().toISOString()}).eq("id",s.id);if(a)throw console.error("[ApproveSubmission] Submission update error:",a),a;console.log("[ApproveSubmission] Updated submission status to approved");const{error:n}=await u.from("kit_resources").update({listing_id:i.id,is_locked:!0}).eq("submission_id",s.id);return n?console.warn("[ApproveSubmission] Resource lock warning:",n):console.log("[ApproveSubmission] Locked kit resources for listing:",i.id),await u.from("profiles").update({is_seller:!0}).eq("id",s.user_id).eq("is_seller",!1),{success:!0,listingId:i.id}}catch(c){const i=c instanceof Error?c.message:"Failed to approve submission";return console.error("[ApproveSubmission] Error:",i,c),x(i),{success:!1,error:i}}finally{p(!1)}},isLoading:o,error:t}},O=()=>{C();const[o,p]=m.useState(!1),[t,x]=m.useState(null);return{rejectSubmission:async(s,c="Does not meet our quality standards")=>{p(!0),x(null);try{const{error:i}=await u.from("submissions").update({status:"rejected",rejection_reason:c,reviewed_at:new Date().toISOString()}).eq("id",s);if(i)throw console.error("[RejectSubmission] Update error:",i),i;return console.log("[RejectSubmission] Successfully rejected submission:",s),{success:!0}}catch(i){const d=i instanceof Error?i.message:"Failed to reject submission";return x(d),{success:!1,error:d}}finally{p(!1)}},isLoading:o,error:t}},Z=()=>{var S;const[o,p]=m.useState("pending"),[t,x]=m.useState(null),[h,s]=m.useState(!1),[c,i]=m.useState(""),[d,a]=m.useState(null),{submissions:n,isLoading:b,error:g,refetch:f}=U({status:o}),{approveSubmission:R,isLoading:_}=B(),{rejectSubmission:E,isLoading:j}=O(),w=async r=>{console.log("[Admin] Approving submission:",r.id,r.project_name);const l=await R(r);console.log("[Admin] Approve result:",l),l.success?(alert(`✅ Approved: ${r.project_name}`),x(null),f()):alert(`❌ Error: ${l.error||"Failed to approve"}`)},k=r=>{a(r),s(!0),i("")},H=async()=>{if(!d)return;if(!c.trim()){alert("Please provide a rejection reason");return}console.log("[Admin] Rejecting submission:",d,"with reason:",c);const r=await E(d,c);console.log("[Admin] Reject result:",r),r.success?(alert("✅ Submission rejected"),x(null),s(!1),a(null),i(""),f()):alert(`❌ Error: ${r.error||"Failed to reject"}`)},F=r=>{switch(r){case"approved":return"text-accent-primary-dim bg-accent-primary/10 border-accent-primary/20";case"rejected":return"text-red-500 bg-red-500/10 border-red-500/20";default:return"text-accent-secondary-fg bg-accent-secondary/20 border-accent-secondary/20"}};if(b)return e.jsx("div",{className:"flex items-center justify-center py-20 h-full",children:e.jsx(v,{className:"animate-spin text-accent-primary",size:32})});if(g)return e.jsx("div",{className:"p-6 bg-red-500/10 border border-red-500/20 rounded-xl",children:e.jsxs("p",{className:"text-red-500 font-medium",children:["Error: ",g]})});const L=r=>o===r?"bg-accent-tertiary text-textInverse shadow-lg shadow-accent-tertiary/25 ring-1 ring-accent-tertiary/20 transform scale-100":"bg-surface text-textMuted hover:text-textMain hover:bg-surfaceHighlight border border-border hover:border-accent-tertiary/30";return e.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"Kit Submissions"}),e.jsx("p",{className:"text-textMuted",children:"Review and manage user-submitted kits"})]}),e.jsx("div",{className:"h-10 w-10 bg-accent-secondary/10 rounded-xl flex items-center justify-center",children:e.jsx(N,{className:"text-accent-secondary-fg",size:20})})]}),e.jsx("div",{className:"flex gap-2 p-1 bg-surfaceHighlight/50 rounded-xl w-fit border border-border/50",children:["all","pending","approved","rejected"].map(r=>e.jsxs("button",{onClick:()=>p(r),className:`px-5 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 capitalize flex items-center gap-2 ${L(r)}`,children:[r,r==="pending"&&n.filter(l=>l.status==="pending").length>0&&e.jsx("span",{className:"px-1.5 py-0.5 bg-accent-secondary/80 text-accent-secondary-fg rounded text-[10px] font-bold leading-none shadow-sm",children:n.filter(l=>l.status==="pending").length})]},r))}),n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center bg-surface border border-border border-dashed rounded-3xl",children:[e.jsx("div",{className:"w-16 h-16 bg-surfaceHighlight rounded-full flex items-center justify-center mb-4",children:e.jsx(N,{className:"text-textMuted",size:24})}),e.jsx("p",{className:"text-textMain font-medium text-lg",children:"No submissions found"}),e.jsxs("p",{className:"text-textMuted text-sm",children:["No ",o!=="all"?o:""," submissions match your criteria."]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(r=>e.jsxs("div",{className:"p-5 rounded-2xl bg-surface border border-border hover:border-accent-primary/30 transition-all group flex flex-col h-full hover:shadow-lg hover:shadow-accent-primary/5",children:[r.thumbnail_url&&e.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden mb-5 bg-surfaceHighlight relative ring-1 ring-black/5 dark:ring-white/5",children:[e.jsx("img",{src:r.thumbnail_url,alt:r.project_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-out"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold tracking-wide uppercase border flex items-center gap-1.5 backdrop-blur-md shadow-sm ${F(r.status)}`,children:r.status})})]}),e.jsxs("div",{className:"space-y-4 flex-1 flex flex-col",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display font-bold text-lg text-textMain line-clamp-1 mb-2 group-hover:text-accent-primary transition-colors",children:r.project_name}),e.jsx("p",{className:"text-sm text-textMuted line-clamp-2 leading-relaxed",children:r.description||"No description provided."})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-textMuted",children:[r.category&&e.jsxs("span",{className:"flex items-center gap-1 bg-surfaceHighlight px-2 py-1 rounded-md border border-border/50",children:[e.jsx(D,{size:12}),r.category]}),r.price!==void 0&&e.jsxs("span",{className:"flex items-center gap-1 bg-surfaceHighlight px-2 py-1 rounded-md border border-border/50",children:[e.jsx(q,{size:12}),"₹",r.price]}),e.jsxs("span",{className:"flex items-center gap-1 bg-surfaceHighlight px-2 py-1 rounded-md border border-border/50 ml-auto",children:[e.jsx(I,{size:12}),new Date(r.created_at).toLocaleDateString()]})]}),e.jsx("div",{className:"mt-auto pt-4 border-t border-border/50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>x(r),className:"flex-1 px-3 py-2.5 rounded-xl bg-surfaceHighlight hover:bg-accent-tertiary/10 text-textMuted hover:text-accent-tertiary text-sm font-medium transition-colors flex items-center justify-center gap-2 border border-transparent hover:border-accent-tertiary/20",children:[e.jsx(T,{size:16}),"View"]}),r.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>w(r),disabled:_,className:"px-3 py-2.5 rounded-xl bg-accent-primary/10 hover:bg-accent-primary text-accent-primary-dim hover:text-accent-primary-fg text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 border border-transparent hover:border-accent-primary/20",title:"Approve",children:e.jsx(M,{size:16})}),e.jsx("button",{onClick:()=>k(r.id),disabled:j,className:"px-3 py-2.5 rounded-xl bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white text-sm font-medium transition-colors flex items-center gap-2 disabled:opacity-50 border border-transparent hover:border-red-500/20",title:"Reject",children:e.jsx(y,{size:16})})]})]})})]})]},r.id))}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-6 animate-fade-in",onClick:()=>x(null),children:e.jsxs("div",{className:"bg-surface border border-border rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl shadow-black/50",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between sticky top-0 bg-surface z-10 backdrop-blur-md bg-opacity-95",children:[e.jsx("h2",{className:"text-xl font-display font-bold text-textMain",children:t.project_name}),e.jsx("button",{onClick:()=>x(null),className:"p-2 rounded-lg hover:bg-surfaceHighlight text-textMuted hover:text-textMain transition-colors",children:e.jsx(y,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.thumbnail_url&&e.jsxs("div",{className:"rounded-xl overflow-hidden ring-1 ring-black/5 dark:ring-white/10 shadow-lg bg-surfaceHighlight",children:[e.jsx("p",{className:"text-xs font-bold text-textMuted uppercase tracking-wider p-3 border-b border-border",children:"Cover Image"}),e.jsx("img",{src:t.thumbnail_url,alt:"Cover",className:"w-full aspect-video object-cover"})]}),t.video_url&&e.jsxs("div",{className:"rounded-xl overflow-hidden ring-1 ring-black/5 dark:ring-white/10 shadow-lg bg-surfaceHighlight",children:[e.jsx("p",{className:"text-xs font-bold text-textMuted uppercase tracking-wider p-3 border-b border-border",children:"Demo Video"}),e.jsx("video",{src:t.video_url,controls:!0,className:"w-full aspect-video bg-black"})]})]}),t.screenshot_urls&&t.screenshot_urls.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-3 block",children:"Screenshots"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.screenshot_urls.map((r,l)=>e.jsx("div",{className:"rounded-lg overflow-hidden border border-border group cursor-zoom-in",children:e.jsx("img",{src:r,alt:`Screenshot ${l+1}`,className:"w-full h-32 object-cover group-hover:scale-105 transition-transform"})},l))})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-1 block",children:"Category"}),e.jsx("p",{className:"text-textMain font-medium",children:t.category||"N/A"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-1 block",children:"Price"}),e.jsxs("p",{className:"text-textMain font-medium",children:["₹",t.price||0]})]}),t.setup_time&&e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-1 block",children:"Setup Time"}),e.jsx("p",{className:"text-textMain font-medium",children:t.setup_time})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-1 block",children:"Status"}),e.jsx("p",{className:"text-textMain font-medium capitalize",children:t.status})]})]}),t.tagline&&e.jsxs("div",{className:"p-4 rounded-xl bg-accent-primary/5 border border-accent-primary/10",children:[e.jsx("label",{className:"text-xs font-bold text-accent-primary uppercase tracking-wider mb-1 block",children:"Tagline"}),e.jsx("p",{className:"text-textMain font-medium leading-relaxed",children:t.tagline})]}),t.short_summary&&e.jsxs("div",{className:"p-4 rounded-xl bg-accent-primary/5 border border-accent-primary/10",children:[e.jsx("label",{className:"text-xs font-bold text-accent-primary uppercase tracking-wider mb-1 block",children:"Short Summary"}),e.jsx("p",{className:"text-textMain font-medium leading-relaxed",children:t.short_summary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-2 block",children:"Technical Description"}),e.jsx("p",{className:"text-textMain leading-relaxed whitespace-pre-wrap text-sm",children:t.description})]}),t.features&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-2 block",children:"Key Features"}),e.jsx("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:e.jsx("p",{className:"text-textMain whitespace-pre-wrap text-sm leading-relaxed",children:t.features})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-2 block",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(t.tech_stack||"N/A").split(",").map((r,l)=>e.jsx("span",{className:"px-3 py-1 bg-surfaceHighlight border border-border rounded-lg text-sm text-textMain",children:r.trim()},l))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.live_url&&e.jsxs("div",{className:"p-4 rounded-xl bg-accent-tertiary/5 border border-accent-tertiary/10",children:[e.jsx("label",{className:"text-xs font-bold text-accent-tertiary-dim uppercase tracking-wider mb-1 block",children:"Live Preview"}),e.jsxs("a",{href:t.live_url,target:"_blank",rel:"noopener noreferrer",className:"text-accent-tertiary hover:underline flex items-center gap-2 font-medium break-all text-sm",children:[t.live_url,e.jsx(z,{size:14})]})]}),t.repo_url&&e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-1 block",children:"Repository"}),e.jsxs("a",{href:t.repo_url,target:"_blank",rel:"noopener noreferrer",className:"text-textMain hover:underline flex items-center gap-2 font-medium break-all text-sm",children:[t.repo_url,e.jsx(z,{size:14})]})]})]}),t.deliverables&&t.deliverables.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-3 block",children:"Deliverables (What's Included)"}),e.jsx("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:e.jsx("ul",{className:"space-y-2",children:t.deliverables.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-textMain",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent-primary mt-1.5 shrink-0"}),r]},l))})})]}),t.what_buyer_gets&&t.what_buyer_gets.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-3 block",children:"What Buyer Gets"}),e.jsx("div",{className:"p-4 rounded-xl bg-accent-secondary/5 border border-accent-secondary/10",children:e.jsx("ul",{className:"space-y-2",children:t.what_buyer_gets.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-textMain",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-accent-secondary mt-1.5 shrink-0"}),r]},l))})})]}),(t.perfect_for&&t.perfect_for.length>0||t.not_for&&t.not_for.length>0)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.perfect_for&&t.perfect_for.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-3 block",children:"✅ Perfect For"}),e.jsx("div",{className:"p-4 rounded-xl bg-green-500/5 border border-green-500/10",children:e.jsx("ul",{className:"space-y-2",children:t.perfect_for.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-textMain",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 shrink-0"}),r]},l))})})]}),t.not_for&&t.not_for.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider mb-3 block",children:"⚠️ NOT For"}),e.jsx("div",{className:"p-4 rounded-xl bg-red-500/5 border border-red-500/10",children:e.jsx("ul",{className:"space-y-2",children:t.not_for.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-textMuted",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500/50 mt-1.5 shrink-0"}),r]},l))})})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"text-xs font-bold text-textMuted uppercase tracking-wider flex items-center gap-2",children:[e.jsx(P,{size:14}),"Uploaded Resources"]}),e.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded ${t.kit_resources&&t.kit_resources.length>0?"bg-accent-primary/10 text-accent-primary":"bg-red-500/10 text-red-500"}`,children:[((S=t.kit_resources)==null?void 0:S.length)||0," files"]})]}),(!t.kit_resources||t.kit_resources.length===0)&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-start gap-3 mb-4",children:[e.jsx(A,{size:18,className:"text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-400",children:"No Resources Uploaded"}),e.jsx("p",{className:"text-xs text-red-400/70 mt-1",children:"The seller has not uploaded any resource files. Buyers need source code to receive value."})]})]}),t.kit_resources&&t.kit_resources.length>0&&e.jsxs(e.Fragment,{children:[!t.kit_resources.some(r=>r.file_type==="zip")&&e.jsxs("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20 flex items-start gap-3 mb-4",children:[e.jsx(A,{size:18,className:"text-amber-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-400",children:"Missing Source Code"}),e.jsx("p",{className:"text-xs text-amber-400/70 mt-1",children:"No ZIP file found. Ensure source code is included before approving."})]})]}),e.jsx("div",{className:"space-y-3",children:t.kit_resources.map((r,l)=>e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50 flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-accent-primary/10 flex items-center justify-center shrink-0",children:e.jsx(N,{size:18,className:"text-accent-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-textMain mb-0.5",children:r.file_name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-textMuted",children:[e.jsx("span",{className:"px-2 py-0.5 bg-surface rounded border border-border uppercase font-mono",children:r.file_type}),r.file_size_bytes&&e.jsxs("span",{children:[(r.file_size_bytes/1024/1024).toFixed(2)," MB"]}),r.linked_deliverable&&e.jsxs("span",{className:"text-accent-primary",children:["→ ",r.linked_deliverable]})]}),r.description&&e.jsx("p",{className:"text-xs text-textMuted mt-1",children:r.description})]})]}),e.jsx("a",{href:r.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg bg-accent-tertiary/10 hover:bg-accent-tertiary/20 text-accent-tertiary transition-colors shrink-0",title:"Download / Preview",children:e.jsx($,{size:16})})]},r.id||l))})]})]})]}),t.status==="pending"&&e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-border mt-8",children:[e.jsxs("button",{onClick:()=>w(t),disabled:_,className:"flex-1 px-6 py-3.5 rounded-xl bg-accent-primary hover:bg-accent-primary-dim text-accent-primary-fg font-bold transition-all disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg shadow-accent-primary/20 hover:scale-[1.02] active:scale-[0.98]",children:[_?e.jsx(v,{className:"animate-spin",size:18}):e.jsx(M,{size:18}),"Approve & Publish"]}),e.jsxs("button",{onClick:()=>k(t.id),disabled:j,className:"px-6 py-3.5 rounded-xl bg-surfaceHighlight hover:bg-red-500/10 text-textMuted hover:text-red-500 border border-border hover:border-red-500/20 font-bold transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:[j?e.jsx(v,{className:"animate-spin",size:18}):e.jsx(y,{size:18}),"Reject"]})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-surface rounded-2xl border border-border max-w-md w-full shadow-2xl animate-slide-up",children:[e.jsxs("div",{className:"p-6 border-b border-border",children:[e.jsx("h3",{className:"text-xl font-display font-bold text-textMain",children:"Reject Submission"}),e.jsx("p",{className:"text-textMuted text-sm mt-1",children:"Please provide a reason for rejection. The seller will see this message."})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"text-sm font-medium text-textMain mb-2 block",children:"Rejection Reason *"}),e.jsx("textarea",{value:c,onChange:r=>i(r.target.value),placeholder:"E.g., Incomplete documentation, Low quality screenshots, Description needs more detail...",className:"w-full h-32 px-4 py-3 rounded-xl bg-surfaceHighlight border border-border text-textMain placeholder:text-textMuted focus:outline-none focus:ring-2 focus:ring-accent-primary/50 resize-none"})]}),e.jsxs("div",{className:"p-6 border-t border-border flex gap-3",children:[e.jsx("button",{onClick:()=>{s(!1),a(null),i("")},className:"flex-1 px-4 py-2.5 rounded-xl bg-surfaceHighlight hover:bg-border text-textMuted hover:text-textMain font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:H,disabled:j||!c.trim(),className:"flex-1 px-4 py-2.5 rounded-xl bg-red-500 hover:bg-red-600 text-white font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[j?e.jsx(v,{className:"animate-spin",size:16}):e.jsx(y,{size:16}),"Reject"]})]})]})})]})};export{Z as default};
