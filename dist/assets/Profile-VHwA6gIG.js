import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as c,L as _,U as M,aL as H,o as E,aI as S,av as C,q as A,u as D,ag as L,aM as h,aJ as T}from"./vendor-icons-BBHJ0ezg.js";import{b as z,s as P}from"./index-76QHltB_.js";import"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const $=()=>{const{user:s}=z(),[m,p]=c.useState(null),[o,d]=c.useState(!0),[x,u]=c.useState(null),t=async()=>{if(!s){d(!1);return}try{d(!0);const{data:l,error:i}=await P.from("profiles").select("*").eq("id",s.id).single();if(i)throw i;p(l)}catch(l){u(l.message),console.error("Error fetching profile:",l)}finally{d(!1)}},n=async l=>{if(!s)return{success:!1,error:"No user logged in"};try{const{error:i}=await P.from("profiles").update(l).eq("id",s.id);if(i)throw i;return await t(),{success:!0}}catch(i){return console.error("Error updating profile:",i),{success:!1,error:i.message}}};return c.useEffect(()=>{t()},[s]),{profile:m,isLoading:o,error:x,updateProfile:n,refreshProfile:t}},R=()=>{var g,j,y,v,N,w;z();const{profile:s,isLoading:m,updateProfile:p}=$(),[o,d]=c.useState(!1),[x,u]=c.useState(null),[t,n]=c.useState({});c.useEffect(()=>{s&&n({full_name:s.full_name,primary_intent:s.primary_intent,experience_level:s.experience_level,interests:s.interests||[],seller_type:s.seller_type,seller_product_focus:s.seller_product_focus,seller_readiness:s.seller_readiness,preferences:s.preferences||{show_buyer_content:!0,show_seller_tools:s.is_seller,receive_updates:!0}})},[s]);const l=async r=>{d(!0),u(null);const a=await p(t);d(!1),a.success?(u({type:"success",text:`${r} updated successfully`}),setTimeout(()=>u(null),3e3)):u({type:"error",text:a.error||"Failed to update"})},i=r=>{const a=t.interests||[],k=a.includes(r)?a.filter(b=>b!==r):[...a,r];n(b=>({...b,interests:k}))},f=r=>{n(a=>({...a,preferences:{...a.preferences,[r]:!a.preferences[r]}}))};if(m)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(_,{className:"animate-spin text-accent-primary",size:32})});if(!s)return null;const I=["SaaS","AI","Design Tools","Dev Tools","Marketing","Productivity","Finance","E-commerce"];return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8 pb-20 space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-8 flex flex-col md:flex-row items-center gap-8 shadow-sm",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-surfaceHighlight border-4 border-surface shadow-inner flex items-center justify-center overflow-hidden",children:s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:s.full_name,className:"w-full h-full object-cover"}):e.jsx(M,{size:40,className:"text-textMuted"})}),e.jsx("button",{className:"absolute bottom-0 right-0 p-2 bg-accent-primary text-textInverse rounded-full shadow-lg hover:bg-accent-secondary transition-colors",title:"Change Avatar",children:e.jsx(H,{size:14})})]}),e.jsxs("div",{className:"text-center md:text-left flex-1",children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:s.full_name||"User Profile"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-3",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full bg-surfaceHighlight border border-border text-xs font-medium text-textMuted flex items-center gap-2",children:[e.jsx(E,{size:12})," ",s.email]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1 ${s.primary_intent==="sell"?"bg-purple-500/10 text-purple-400 border-purple-500/20":"bg-blue-500/10 text-blue-400 border-blue-500/20"}`,children:[s.is_seller?e.jsx(S,{size:12}):e.jsx(C,{size:12}),s.primary_intent==="sell"?"Seller Account":"Buyer Profile"]}),e.jsxs("span",{className:"px-3 py-1 rounded-full bg-green-500/10 text-green-400 border border-green-500/20 text-xs font-medium flex items-center gap-1",children:[e.jsx(A,{size:12})," Verified"]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase font-bold mb-1",children:"Member Since"}),e.jsx("p",{className:"text-sm font-mono text-textMain",children:new Date(s.created_at).toLocaleDateString(void 0,{month:"long",year:"numeric"})})]})]}),x&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-slide-in-right ${x.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[x.type==="success"?e.jsx(D,{size:18}):e.jsx(L,{size:18}),e.jsx("span",{className:"font-medium",children:x.text})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-textMain flex items-center gap-2",children:[e.jsx(M,{size:20,className:"text-accent-primary"}),"Personal Info"]}),e.jsxs("button",{onClick:()=>l("Personal Info"),disabled:o,className:"text-sm font-medium text-accent-primary hover:text-accent-secondary disabled:opacity-50 flex items-center gap-1",children:[o?e.jsx(_,{size:14,className:"animate-spin"}):e.jsx(h,{size:14}),"Save Changes"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-textMuted uppercase mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:t.full_name||"",onChange:r=>n({...t,full_name:r.target.value}),className:"w-full bg-surfaceHighlight border border-border rounded-xl px-4 py-3 text-textMain focus:border-accent-primary focus:outline-none transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-textMuted uppercase mb-2",children:"Primary Goal"}),e.jsxs("select",{value:t.primary_intent||"explore",onChange:r=>n({...t,primary_intent:r.target.value}),className:"w-full bg-surfaceHighlight border border-border rounded-xl px-4 py-3 text-textMain focus:border-accent-primary focus:outline-none appearance-none",children:[e.jsx("option",{value:"explore",children:"Exploring"}),e.jsx("option",{value:"buy",children:"Buying Software"}),e.jsx("option",{value:"sell",children:"Selling Software"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-textMuted uppercase mb-2",children:"Experience Level"}),e.jsxs("select",{value:t.experience_level||"beginner",onChange:r=>n({...t,experience_level:r.target.value}),className:"w-full bg-surfaceHighlight border border-border rounded-xl px-4 py-3 text-textMain focus:border-accent-primary focus:outline-none appearance-none",children:[e.jsx("option",{value:"beginner",children:"Beginner"}),e.jsx("option",{value:"intermediate",children:"Intermediate"}),e.jsx("option",{value:"advanced",children:"Advanced"})]})]})]})]})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-textMain flex items-center gap-2",children:[e.jsx(C,{size:20,className:"text-amber-400"}),"Interests & Focus"]}),e.jsxs("button",{onClick:()=>l("Interests"),disabled:o,className:"text-sm font-medium text-accent-primary hover:text-accent-secondary disabled:opacity-50 flex items-center gap-1",children:[e.jsx(h,{size:14})," Save Changes"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(r=>{var a;return e.jsx("button",{onClick:()=>i(r),className:`px-4 py-2 rounded-xl text-sm font-medium border transition-all ${(a=t.interests)!=null&&a.includes(r)?"bg-accent-primary text-white border-accent-primary shadow-md":"bg-surfaceHighlight text-textMuted border-border hover:border-accent-primary/50"}`,children:r},r)})})]}),(s.is_seller||t.primary_intent==="sell")&&e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-textMain flex items-center gap-2",children:[e.jsx(S,{size:20,className:"text-purple-400"}),"Seller Profile"]}),e.jsxs("button",{onClick:()=>l("Seller Profile"),disabled:o,className:"text-sm font-medium text-accent-primary hover:text-accent-secondary disabled:opacity-50 flex items-center gap-1",children:[e.jsx(h,{size:14})," Save Changes"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-textMuted uppercase mb-2",children:"Seller Type"}),e.jsxs("select",{value:t.seller_type||"solo",onChange:r=>n({...t,seller_type:r.target.value}),className:"w-full bg-surfaceHighlight border border-border rounded-xl px-4 py-3 text-textMain focus:border-accent-primary focus:outline-none",children:[e.jsx("option",{value:"solo",children:"Solo Founder"}),e.jsx("option",{value:"indie",children:"Indie Hacker"}),e.jsx("option",{value:"agency",children:"Agency"}),e.jsx("option",{value:"team",children:"VC Backed Team"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-textMuted uppercase mb-2",children:"Product Focus"}),e.jsx("input",{type:"text",placeholder:"e.g. Micro-SaaS, AI Tools",value:t.seller_product_focus||"",onChange:r=>n({...t,seller_product_focus:r.target.value}),className:"w-full bg-surfaceHighlight border border-border rounded-xl px-4 py-3 text-textMain focus:border-accent-primary focus:outline-none"})]})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-xl font-display font-bold text-textMain flex items-center gap-2",children:[e.jsx(T,{size:20,className:"text-textMuted"}),"Preferences"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surfaceHighlight rounded-xl",children:[e.jsx("span",{className:"text-sm font-medium text-textMain",children:"Buyer Content"}),e.jsx("button",{onClick:()=>f("show_buyer_content"),className:`w-11 h-6 rounded-full transition-colors relative ${(g=t.preferences)!=null&&g.show_buyer_content?"bg-accent-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform ${(j=t.preferences)!=null&&j.show_buyer_content?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surfaceHighlight rounded-xl",children:[e.jsx("span",{className:"text-sm font-medium text-textMain",children:"Seller Tools"}),e.jsx("button",{onClick:()=>f("show_seller_tools"),className:`w-11 h-6 rounded-full transition-colors relative ${(y=t.preferences)!=null&&y.show_seller_tools?"bg-accent-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform ${(v=t.preferences)!=null&&v.show_seller_tools?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-surfaceHighlight rounded-xl",children:[e.jsx("span",{className:"text-sm font-medium text-textMain",children:"Product Updates"}),e.jsx("button",{onClick:()=>f("receive_updates"),className:`w-11 h-6 rounded-full transition-colors relative ${(N=t.preferences)!=null&&N.receive_updates?"bg-accent-primary":"bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform ${(w=t.preferences)!=null&&w.receive_updates?"translate-x-5":""}`})})]})]}),e.jsx("button",{onClick:()=>l("Preferences"),disabled:o,className:"w-full mt-6 py-2 rounded-xl bg-surface text-textMuted border border-border hover:bg-surfaceHighlight text-sm font-medium transition-colors",children:"Save Preferences"})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6",children:[e.jsx("h2",{className:"text-lg font-display font-bold text-textMain mb-4",children:"Account Details"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-textMuted",children:"User ID"}),e.jsxs("span",{className:"font-mono text-textMain text-xs",title:s.id,children:[s.id.substring(0,8),"..."]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-textMuted",children:"Onboarding"}),e.jsx("span",{className:s.onboarding_completed?"text-green-400":"text-amber-400",children:s.onboarding_completed?"Completed":"Pending"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-border",children:[e.jsx("span",{className:"text-textMuted",children:"Last Login"}),e.jsx("span",{className:"text-textMain",children:"Just now"})]}),e.jsx("div",{className:"flex justify-between py-2 pt-4",children:e.jsx("button",{className:"text-red-400 hover:text-red-300 text-xs font-bold uppercase transition-colors",children:"Delete Account"})})]})]})]})]})]})};export{R as default};
