import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as o,L as y,D as v,aH as M,u as p,X as k}from"./vendor-icons-BBHJ0ezg.js";import{g as w,h as C}from"./useRefundsAndWithdrawals-DUJgh36L.js";import"./index-76QHltB_.js";import"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const D=()=>{var m;const[a,b]=o.useState("pending"),[s,l]=o.useState(null),[x,n]=o.useState(""),{withdrawals:i,isLoading:h,refetch:g}=w(a),{processWithdrawal:j,isLoading:c}=C(),f=t=>{switch(t){case"pending":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"processing":return"bg-blue-500/10 text-blue-400 border-blue-500/20";case"completed":return"bg-green-500/10 text-green-400 border-green-500/20";case"rejected":return"bg-red-500/10 text-red-400 border-red-500/20";default:return"bg-surfaceHighlight text-textMuted border-border"}},d=async t=>{if(!s)return;(await j(s.id,t,x)).success&&(l(null),n(""),g())},N=t=>a===t?"bg-accent-tertiary text-textInverse shadow-lg":"bg-surface text-textMuted hover:text-textMain hover:bg-surfaceHighlight border border-border";return h?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(y,{className:"animate-spin text-accent-primary",size:32})}):e.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"Seller Withdrawals"}),e.jsx("p",{className:"text-textMuted",children:"Process seller payout requests"})]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","processing","completed","rejected"].map(t=>e.jsx("button",{onClick:()=>b(t),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${N(t)}`,children:t.replace(/\b\w/g,r=>r.toUpperCase())},t))}),i.length===0&&e.jsxs("div",{className:"text-center py-20 bg-surface border border-border rounded-2xl",children:[e.jsx(v,{size:48,className:"mx-auto text-textMuted mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-textMain mb-2",children:"No withdrawal requests"}),e.jsx("p",{className:"text-textMuted",children:a==="all"?"No withdrawal requests have been submitted yet.":`No ${a} requests.`})]}),i.length>0&&e.jsx("div",{className:"bg-surface border border-border rounded-2xl overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-surfaceHighlight border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"text-left p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"text-left p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"text-left p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"text-left p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"text-center p-4 text-xs font-bold text-textMuted uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:i.map(t=>{var r,u;return e.jsxs("tr",{className:"hover:bg-surfaceHighlight/50 transition-colors",children:[e.jsxs("td",{className:"p-4",children:[e.jsx("p",{className:"font-medium text-textMain",children:((r=t.seller)==null?void 0:r.full_name)||"Unknown Seller"}),e.jsx("p",{className:"text-xs text-textMuted",children:(u=t.seller)==null?void 0:u.email})]}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-bold text-lg text-accent-primary",children:["₹",t.amount]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"text-sm text-textMuted capitalize",children:t.payment_method||"Not specified"})}),e.jsx("td",{className:"p-4 text-sm text-textMuted",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${f(t.status)}`,children:t.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>{l(t),n(t.admin_notes||"")},className:"p-2 text-textMuted hover:text-accent-primary hover:bg-accent-primary/10 rounded-lg transition-colors",title:"Review",children:e.jsx(M,{size:16})}),t.status==="pending"&&e.jsx("button",{onClick:()=>{l(t),d("completed")},className:"p-2 text-textMuted hover:text-green-400 hover:bg-green-500/10 rounded-lg transition-colors",title:"Mark Completed",children:e.jsx(p,{size:16})})]})})]},t.id)})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-surface rounded-2xl border border-border max-w-lg w-full shadow-2xl animate-slide-up",children:[e.jsx("div",{className:"p-6 border-b border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-display font-bold text-textMain",children:"Process Withdrawal"}),e.jsx("p",{className:"text-textMuted text-sm mt-1",children:(m=s.seller)==null?void 0:m.full_name})]}),e.jsx("button",{onClick:()=>l(null),className:"p-2 hover:bg-surfaceHighlight rounded-lg transition-colors",children:e.jsx(k,{size:20,className:"text-textMuted"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center py-6 bg-surfaceHighlight rounded-xl",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase mb-2",children:"Withdrawal Amount"}),e.jsxs("p",{className:"text-4xl font-bold text-accent-primary",children:["₹",s.amount]})]}),e.jsxs("div",{className:"p-4 bg-surfaceHighlight rounded-lg",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase mb-2",children:"Payment Method"}),e.jsx("p",{className:"text-textMain font-medium capitalize",children:s.payment_method||"Not specified"}),s.payment_details&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border text-sm",children:Object.entries(s.payment_details).map(([t,r])=>e.jsxs("div",{className:"flex justify-between py-1",children:[e.jsx("span",{className:"text-textMuted capitalize",children:t.replace("_"," ")}),e.jsx("span",{className:"text-textMain",children:String(r)})]},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-textMuted uppercase",children:"Admin Notes"}),e.jsx("textarea",{value:x,onChange:t=>n(t.target.value),placeholder:"Add notes about this withdrawal...",rows:2,className:"w-full bg-surfaceHighlight border border-border rounded-lg px-4 py-3 text-textMain placeholder:text-textMuted focus:border-accent-primary focus:outline-none resize-none"})]}),s.status!=="completed"&&s.status!=="rejected"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[s.status==="pending"&&e.jsx("button",{onClick:()=>d("processing"),disabled:c,className:"flex-1 px-4 py-3 rounded-xl bg-blue-500/10 text-blue-400 border border-blue-500/20 hover:bg-blue-500/20 font-medium transition-colors disabled:opacity-50",children:"Mark Processing"}),e.jsxs("button",{onClick:()=>d("completed"),disabled:c,className:"flex-1 px-4 py-3 rounded-xl bg-green-500/10 text-green-400 border border-green-500/20 hover:bg-green-500/20 font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(p,{size:18}),"Mark Completed"]}),e.jsx("button",{onClick:()=>d("rejected"),disabled:c,className:"px-4 py-3 rounded-xl bg-red-500/10 text-red-400 border border-red-500/20 hover:bg-red-500/20 font-medium transition-colors disabled:opacity-50",children:"Reject"})]})]})]})})]})};export{D as default};
