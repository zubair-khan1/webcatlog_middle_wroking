import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as l,x as j,ag as _,aX as y,C as v,L as N,aM as M}from"./vendor-icons-BBHJ0ezg.js";import{b as k,s as C}from"./index-76QHltB_.js";import{u as S}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const I=()=>{const{user:o}=k(),x=S(),[d,u]=l.useState(!1),[m,s]=l.useState(null),[b,p]=l.useState(!1),[t,f]=l.useState({account_holder_name:"",bank_name:"",account_number:"",confirm_account_number:"",ifsc_code:"",upi_id:""}),r=i=>{const{name:n,value:a}=i.target;f(c=>({...c,[n]:a})),s(null)},h=()=>t.account_holder_name.trim()?t.bank_name.trim()?t.account_number.trim()?t.account_number!==t.confirm_account_number?"Account numbers do not match":t.ifsc_code.match(/^[A-Z]{4}0[A-Z0-9]{6}$/)?null:"Invalid IFSC code format":"Account number is required":"Bank name is required":"Account holder name is required",g=async i=>{i.preventDefault();const n=h();if(n){s(n);return}u(!0),s(null);try{const a=t.account_number.slice(-4),{error:c}=await C.from("seller_bank_accounts").upsert({seller_id:o==null?void 0:o.id,account_holder_name:t.account_holder_name,bank_name:t.bank_name,account_number_last4:a,ifsc_code:t.ifsc_code.toUpperCase(),upi_id:t.upi_id||null,is_verified:!1,updated_at:new Date().toISOString()},{onConflict:"seller_id"});if(c)throw c;p(!0),setTimeout(()=>x("/seller/payouts"),2e3)}catch(a){console.error("[SellerBankSetup] Error:",a),s(a instanceof Error?a.message:"Failed to save bank details")}finally{u(!1)}};return b?e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:e.jsxs("div",{className:"text-center animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 bg-accent-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{size:32,className:"text-accent-primary"})}),e.jsx("h2",{className:"text-2xl font-display font-bold text-textMain mb-2",children:"Bank Details Saved!"}),e.jsx("p",{className:"text-textMuted",children:"Redirecting to payouts page..."})]})}):e.jsxs("div",{className:"space-y-8 animate-fade-in pb-12",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"Bank Account Setup"}),e.jsx("p",{className:"text-textMuted",children:"Add your bank details to receive payouts"})]}),e.jsx("form",{onSubmit:g,className:"max-w-xl",children:e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-accent-secondary/10 border border-accent-secondary/20 flex items-start gap-3",children:[e.jsx(_,{size:18,className:"text-accent-secondary-fg mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-textMain",children:"Important"}),e.jsx("p",{className:"text-textMuted",children:"Ensure your bank details are accurate. Incorrect details may delay your payouts."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textMuted mb-2",children:"Account Holder Name"}),e.jsx("input",{type:"text",name:"account_holder_name",value:t.account_holder_name,onChange:r,placeholder:"As per bank records",className:"w-full px-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textMuted mb-2",children:"Bank Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-textMuted"}),e.jsx("input",{type:"text",name:"bank_name",value:t.bank_name,onChange:r,placeholder:"e.g., HDFC Bank",className:"w-full pl-12 pr-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textMuted mb-2",children:"Account Number"}),e.jsx("input",{type:"text",name:"account_number",value:t.account_number,onChange:r,placeholder:"Enter account number",className:"w-full px-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textMuted mb-2",children:"Confirm Account Number"}),e.jsx("input",{type:"text",name:"confirm_account_number",value:t.confirm_account_number,onChange:r,placeholder:"Re-enter account number",className:"w-full px-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-textMuted mb-2",children:"IFSC Code"}),e.jsx("input",{type:"text",name:"ifsc_code",value:t.ifsc_code,onChange:r,placeholder:"e.g., HDFC0001234",maxLength:11,className:"w-full px-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors uppercase"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-textMuted mb-2",children:["UPI ID ",e.jsx("span",{className:"text-textMuted",children:"(Optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-textMuted"}),e.jsx("input",{type:"text",name:"upi_id",value:t.upi_id,onChange:r,placeholder:"yourname@upi",className:"w-full pl-12 pr-4 py-3 bg-surfaceHighlight border border-border rounded-xl text-textMain placeholder:text-textMuted focus:outline-none focus:border-accent-primary transition-colors"})]})]}),m&&e.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-500 text-sm",children:m}),e.jsx("button",{type:"submit",disabled:d,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-accent-primary text-accent-primary-fg font-bold rounded-xl hover:brightness-110 transition-all disabled:opacity-50",children:d?e.jsxs(e.Fragment,{children:[e.jsx(N,{size:18,className:"animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{size:18}),"Save Bank Details"]})})]})})]})};export{I as default};
