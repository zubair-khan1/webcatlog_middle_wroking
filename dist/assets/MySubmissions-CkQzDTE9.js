import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a,aj as g,L as y,ag as w,m as b,ap as k,aP as M,D as S,aB as _,aH as z,aw as C,ar as f,at as H,x as L}from"./vendor-icons-BBHJ0ezg.js";import{b as E,B as o,s as D}from"./index-76QHltB_.js";import{u as P}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const I=()=>{const c=P(),{user:d,isAuthenticated:N}=E(),[r,v]=a.useState([]),[n,m]=a.useState(!0),[p,u]=a.useState(null),[s,x]=a.useState(null);if(a.useEffect(()=>{if(!d)return;(async()=>{m(!0),u(null);try{const{data:l,error:j}=await D.from("submissions").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(j)throw j;v(l||[])}catch(l){u(l instanceof Error?l.message:"Failed to fetch submissions")}finally{m(!1)}})()},[d]),!N)return e.jsxs("div",{className:"pt-32 pb-20 px-6 min-h-[80vh] flex flex-col items-center justify-center text-center",children:[e.jsx("p",{className:"text-textMuted mb-4",children:"Please sign in to view your submissions"}),e.jsx(o,{onClick:()=>c("/signin"),children:"Sign In"})]});const h=t=>{switch(t){case"approved":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-accent-primary/10 text-accent-primary border border-accent-primary/20",children:[e.jsx(L,{size:12}),"Approved"]});case"rejected":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-red-500/10 text-red-400 border border-red-500/20",children:[e.jsx(f,{size:12}),"Rejected"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-accent-secondary/10 text-accent-secondary border border-accent-secondary/20",children:[e.jsx(H,{size:12}),"Under Review"]})}},i={total:r.length,pending:r.filter(t=>t.status==="pending").length,approved:r.filter(t=>t.status==="approved").length,rejected:r.filter(t=>t.status==="rejected").length};return e.jsxs("div",{className:"pt-32 pb-20 px-6 max-w-6xl mx-auto animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"My Submissions"}),e.jsx("p",{className:"text-textMuted",children:"Track the status of your kit submissions"})]}),e.jsx(o,{onClick:()=>c("/submit"),icon:e.jsx(g,{size:16}),children:"Submit New Kit"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surface border border-border",children:[e.jsx("p",{className:"text-2xl font-bold text-textMain",children:i.total}),e.jsx("p",{className:"text-xs text-textMuted uppercase tracking-wider mt-1",children:"Total"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-accent-secondary/5 border border-accent-secondary/20",children:[e.jsx("p",{className:"text-2xl font-bold text-accent-secondary",children:i.pending}),e.jsx("p",{className:"text-xs text-accent-secondary/80 uppercase tracking-wider mt-1",children:"Pending"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-accent-primary/5 border border-accent-primary/20",children:[e.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:i.approved}),e.jsx("p",{className:"text-xs text-accent-primary/80 uppercase tracking-wider mt-1",children:"Approved"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-red-500/5 border border-red-500/20",children:[e.jsx("p",{className:"text-2xl font-bold text-red-400",children:i.rejected}),e.jsx("p",{className:"text-xs text-red-400/80 uppercase tracking-wider mt-1",children:"Rejected"})]})]}),n&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(y,{className:"animate-spin text-accent-primary",size:32})}),p&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-500/10 border border-red-500/20 flex items-start gap-3 mb-6",children:[e.jsx(w,{className:"text-red-400 shrink-0 mt-0.5",size:18}),e.jsx("p",{className:"text-red-400 text-sm",children:p})]}),!n&&r.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center border border-dashed border-border rounded-2xl bg-surface",children:[e.jsx("div",{className:"w-16 h-16 bg-surfaceHighlight rounded-full flex items-center justify-center mb-4",children:e.jsx(b,{className:"text-textMuted",size:24})}),e.jsx("h3",{className:"text-xl font-display font-bold text-textMain mb-2",children:"No Submissions Yet"}),e.jsx("p",{className:"text-textMuted mb-6 max-w-sm",children:"Submit your first kit to start earning revenue on the marketplace."}),e.jsx(o,{onClick:()=>c("/submit"),icon:e.jsx(g,{size:16}),children:"Submit Your First Kit"})]}),!n&&r.length>0&&e.jsx("div",{className:"grid gap-6",children:r.map(t=>e.jsxs("div",{className:"p-6 rounded-2xl bg-surface border border-border hover:border-accent-primary/30 transition-all flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"md:w-64 shrink-0",children:t.thumbnail_url?e.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden bg-surfaceHighlight relative group",children:[e.jsx("img",{src:t.thumbnail_url,alt:t.project_name,className:"w-full h-full object-cover"}),t.video_url&&e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center",children:e.jsx(k,{size:20,className:"text-black ml-1"})})})]}):e.jsx("div",{className:"aspect-video rounded-xl bg-surfaceHighlight flex items-center justify-center",children:e.jsx(b,{className:"text-textMuted",size:32})})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-display font-bold text-textMain mb-1",children:t.project_name}),t.short_summary&&e.jsx("p",{className:"text-textMuted text-sm",children:t.short_summary})]}),h(t.status)]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-textMuted mb-4",children:[t.category&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-surfaceHighlight rounded border border-border/50",children:[e.jsx(M,{size:12}),t.category]}),t.price!==void 0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-surfaceHighlight rounded border border-border/50",children:[e.jsx(S,{size:12}),"$",t.price]}),e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-surfaceHighlight rounded border border-border/50",children:[e.jsx(_,{size:12}),new Date(t.created_at).toLocaleDateString()]})]}),t.status==="rejected"&&t.rejection_reason&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/5 border border-red-500/20 mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-red-400 uppercase tracking-wider mb-1",children:"Rejection Reason"}),e.jsx("p",{className:"text-sm text-red-300",children:t.rejection_reason})]}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-border flex gap-3",children:[e.jsxs("button",{onClick:()=>x(t),className:"px-4 py-2 rounded-lg bg-surfaceHighlight hover:bg-accent-tertiary/10 text-textMuted hover:text-accent-tertiary text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(z,{size:16}),"View Details"]}),t.status==="approved"&&e.jsxs("button",{onClick:()=>c(`/kit/${t.id}`),className:"px-4 py-2 rounded-lg bg-accent-primary/10 hover:bg-accent-primary text-accent-primary hover:text-white text-sm font-medium transition-colors flex items-center gap-2",children:[e.jsx(C,{size:16}),"View Live Listing"]})]})]})]},t.id))}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-6",onClick:()=>x(null),children:e.jsxs("div",{className:"bg-surface border border-border rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-display font-bold text-textMain",children:s.project_name}),e.jsx("button",{onClick:()=>x(null),className:"p-2 rounded-lg hover:bg-surfaceHighlight text-textMuted hover:text-textMain transition-colors",children:e.jsx(f,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[s.thumbnail_url&&e.jsx("div",{className:"rounded-xl overflow-hidden",children:s.video_url?e.jsx("video",{src:s.video_url,poster:s.thumbnail_url,controls:!0,className:"w-full aspect-video bg-black"}):e.jsx("img",{src:s.thumbnail_url,alt:s.project_name,className:"w-full"})}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-surfaceHighlight",children:[e.jsx("span",{className:"text-sm text-textMuted",children:"Status"}),h(s.status)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase tracking-wider mb-1",children:"Category"}),e.jsx("p",{className:"text-textMain font-medium",children:s.category||"N/A"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase tracking-wider mb-1",children:"Price"}),e.jsxs("p",{className:"text-textMain font-medium",children:["$",s.price||0]})]})]}),s.status==="rejected"&&s.rejection_reason&&e.jsxs("div",{className:"p-4 rounded-xl bg-red-500/5 border border-red-500/20",children:[e.jsx("p",{className:"text-xs font-medium text-red-400 uppercase tracking-wider mb-2",children:"Why was this rejected?"}),e.jsx("p",{className:"text-sm text-textMain",children:s.rejection_reason})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-textMuted uppercase tracking-wider",children:"Timeline"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-accent-primary"}),e.jsx("span",{className:"text-textMuted",children:"Submitted:"}),e.jsx("span",{className:"text-textMain",children:new Date(s.created_at).toLocaleString()})]}),s.reviewed_at&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-accent-secondary"}),e.jsx("span",{className:"text-textMuted",children:"Reviewed:"}),e.jsx("span",{className:"text-textMain",children:new Date(s.reviewed_at).toLocaleString()})]})]})]})]})]})})]})};export{I as default};
