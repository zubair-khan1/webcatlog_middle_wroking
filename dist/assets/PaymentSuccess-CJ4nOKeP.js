import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a,L as b,x as u,P as N,E as y}from"./vendor-icons-BBHJ0ezg.js";import{B as h,s as v}from"./index-76QHltB_.js";import{e as w,u as M}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const O=()=>{var l,n,d,o;const{orderId:t}=w(),i=M(),[s,p]=a.useState(null),[f,j]=a.useState(!0),[r,g]=a.useState(3);return a.useEffect(()=>{(async()=>{if(t)try{const{data:c,error:x}=await v.from("orders").select(`
            id,
            order_number,
            listing:listings(title, image_url),
            seller:profiles!orders_seller_id_fkey(full_name)
          `).eq("id",t).single();if(x)throw x;p(c)}catch(c){console.error("Error fetching order:",c)}finally{j(!1)}})()},[t]),a.useEffect(()=>{if(!s||r<=0)return;const m=setTimeout(()=>{r===1?i(`/order/${t}`):g(r-1)},1e3);return()=>clearTimeout(m)},[r,s,t,i]),f?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(b,{className:"animate-spin text-accent-primary",size:32})}):s?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-6 py-12",children:e.jsxs("div",{className:"max-w-2xl w-full",children:[e.jsxs("div",{className:"text-center mb-8 animate-slide-up",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-accent-primary/10 border border-accent-primary/20 mb-6 animate-scale-in",children:e.jsx(u,{className:"text-accent-primary",size:40,strokeWidth:2.5})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-textMain mb-3",children:"Payment Successful!"}),e.jsx("p",{className:"text-textMuted text-lg",children:"Your purchase is complete. You now have lifetime access to this blueprint."})]}),e.jsxs("div",{className:"bg-surface border border-border rounded-2xl p-6 mb-6 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-textMuted uppercase tracking-wider mb-4",children:[e.jsx(N,{size:14}),e.jsxs("span",{children:["Order ",s.order_number]})]}),e.jsxs("div",{className:"flex gap-4 items-start",children:[((l=s.listing)==null?void 0:l.image_url)&&e.jsx("img",{src:s.listing.image_url,alt:(n=s.listing)==null?void 0:n.title,className:"w-20 h-20 rounded-lg object-cover border border-border"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-textMain mb-1",children:(d=s.listing)==null?void 0:d.title}),e.jsxs("p",{className:"text-sm text-textMuted mb-3",children:["Created by ",e.jsx("span",{className:"text-textMain font-medium",children:(o=s.seller)==null?void 0:o.full_name})]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-accent-primary/10 border border-accent-primary/20",children:[e.jsx(u,{size:14,className:"text-accent-primary"}),e.jsx("span",{className:"text-xs font-medium text-accent-primary",children:"Lifetime Access Granted"})]})]})]})]}),e.jsxs("div",{className:"bg-surfaceHighlight/50 border border-border rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-sm font-bold text-textMain mb-3",children:"What's Next?"}),e.jsxs("ul",{className:"space-y-2 text-sm text-textMuted",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent-primary mt-0.5",children:"→"}),e.jsx("span",{children:"Access your private workspace to view all resources"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent-primary mt-0.5",children:"→"}),e.jsx("span",{children:"Download source code and documentation"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-accent-primary mt-0.5",children:"→"}),e.jsx("span",{children:"Message the creator with any questions"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(h,{className:"w-full h-12 text-base font-semibold shadow-lg",onClick:()=>i(`/order/${t}`),icon:e.jsx(y,{size:18}),children:"Go to Your Blueprint Workspace"}),e.jsxs("p",{className:"text-center text-sm text-textMuted",children:["Redirecting automatically in ",r," second",r!==1?"s":"","..."]})]})]})}):e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",children:[e.jsx("p",{className:"text-textMuted",children:"Order not found"}),e.jsx(h,{onClick:()=>i("/dashboard"),children:"Go to Dashboard"})]})};export{O as default};
