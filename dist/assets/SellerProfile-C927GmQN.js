import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as c,ax as _,x as y,ay as w,az as M,K as k,av as f,P as u,aA as S,aB as z}from"./vendor-icons-BBHJ0ezg.js";import{s as p}from"./index-76QHltB_.js";import{e as L,L as h}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const E=a=>{const[t,l]=c.useState(null),[x,o]=c.useState([]),[g,i]=c.useState(!0),[m,n]=c.useState(null);return c.useEffect(()=>{if(!a)return;(async()=>{i(!0),n(null);try{const{data:s,error:b}=await p.from("profiles").select(`
                        id,
                        full_name,
                        avatar_url,
                        bio,
                        website_url,
                        twitter_handle,
                        github_handle,
                        is_seller,
                        is_verified_seller,
                        seller_level,
                        rating_average,
                        rating_count,
                        total_sales,
                        completion_rate,
                        created_at
                    `).eq("id",a).eq("is_seller",!0).single();if(b)throw new Error("Seller not found");l(s);const{data:j,error:v}=await p.from("listings").select(`
                        id,
                        title,
                        slug,
                        price,
                        image_url,
                        rating_average,
                        rating_count,
                        purchase_count,
                        last_sold_at,
                        category:categories(name)
                    `).eq("seller_id",a).eq("moderation_status","approved").order("quality_score",{ascending:!1});if(!v){const N=(j||[]).map(d=>({...d,category:Array.isArray(d.category)?d.category[0]:d.category}));o(N)}}catch(s){n(s instanceof Error?s.message:"Failed to load profile")}finally{i(!1)}})()},[a]),{profile:t,listings:x,isLoading:g,error:m}},q=()=>{const{id:a}=L(),{profile:t,listings:l,isLoading:x,error:o}=E(a);if(x)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-accent-primary border-t-transparent rounded-full"})});if(o||!t)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background gap-4",children:[e.jsx("p",{className:"text-red-500",children:o||"Seller not found"}),e.jsx(h,{to:"/mvp-kits",className:"text-accent-tertiary hover:underline",children:"Browse all kits"})]});const i=(r=>{const s={new:{color:"bg-gray-500/10 text-gray-500",label:"New Seller"},rising:{color:"bg-blue-500/10 text-blue-500",label:"Rising Seller"},established:{color:"bg-green-500/10 text-green-500",label:"Established"},trusted:{color:"bg-purple-500/10 text-purple-500",label:"Trusted Seller"},top_seller:{color:"bg-amber-500/10 text-amber-500",label:"⭐ Top Seller"}};return s[r]||s.new})(t.seller_level),m=r=>new Date(r).toLocaleDateString("en-US",{month:"short",year:"numeric"}),n=r=>{if(!r)return null;const s=Math.floor((Date.now()-new Date(r).getTime())/(1e3*60*60*24));return s===0?"Sold today":s===1?"Sold yesterday":s<7?`Sold ${s} days ago`:s<30?`Sold ${Math.floor(s/7)} weeks ago`:null};return e.jsx("div",{className:"min-h-screen bg-background py-12 px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(h,{to:"/mvp-kits",className:"inline-flex items-center gap-2 text-textMuted hover:text-textMain transition-colors mb-8",children:[e.jsx(_,{size:16}),"Back to Marketplace"]}),e.jsx("div",{className:"bg-surface border border-border rounded-3xl p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsx("div",{className:"shrink-0",children:t.avatar_url?e.jsx("img",{src:t.avatar_url,alt:t.full_name,className:"w-32 h-32 rounded-2xl object-cover border-4 border-border"}):e.jsx("div",{className:"w-32 h-32 rounded-2xl bg-accent-primary/10 flex items-center justify-center text-4xl font-bold text-accent-primary",children:t.full_name[0]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain",children:t.full_name}),t.is_verified_seller&&e.jsxs("span",{className:"px-3 py-1 bg-accent-primary/10 text-accent-primary rounded-full text-sm font-medium flex items-center gap-1",children:[e.jsx(y,{size:14})," Verified"]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.color}`,children:i.label})]}),t.bio&&e.jsx("p",{className:"text-textMuted leading-relaxed mb-4 max-w-2xl",children:t.bio}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[t.website_url&&e.jsxs("a",{href:t.website_url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-sm text-textMuted hover:text-accent-tertiary transition-colors",children:[e.jsx(w,{size:14})," Website"]}),t.twitter_handle&&e.jsxs("a",{href:`https://twitter.com/${t.twitter_handle}`,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-sm text-textMuted hover:text-accent-tertiary transition-colors",children:[e.jsx(M,{size:14})," @",t.twitter_handle]}),t.github_handle&&e.jsxs("a",{href:`https://github.com/${t.github_handle}`,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-sm text-textMuted hover:text-accent-tertiary transition-colors",children:[e.jsx(k,{size:14})," ",t.github_handle]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-accent-primary mb-1",children:[e.jsx(f,{size:16}),e.jsx("span",{className:"text-2xl font-bold",children:t.rating_average.toFixed(1)})]}),e.jsxs("p",{className:"text-xs text-textMuted",children:[t.rating_count," reviews"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-accent-tertiary mb-1",children:[e.jsx(u,{size:16}),e.jsx("span",{className:"text-2xl font-bold",children:t.total_sales||0})]}),e.jsx("p",{className:"text-xs text-textMuted",children:"Total sales"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-1",children:[e.jsx(S,{size:16}),e.jsxs("span",{className:"text-2xl font-bold",children:[(t.completion_rate||100).toFixed(0),"%"]})]}),e.jsx("p",{className:"text-xs text-textMuted",children:"Completion rate"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-surfaceHighlight border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-textMuted mb-1",children:[e.jsx(z,{size:16}),e.jsx("span",{className:"text-lg font-medium",children:m(t.created_at)})]}),e.jsx("p",{className:"text-xs text-textMuted",children:"Member since"})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-display font-bold text-textMain mb-6",children:[l.length," Kit",l.length!==1?"s":""," by ",t.full_name]}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-surface border border-border border-dashed rounded-2xl",children:[e.jsx(u,{size:32,className:"mx-auto mb-3 text-textMuted opacity-50"}),e.jsx("p",{className:"text-textMuted",children:"No published kits yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(r=>e.jsxs(h,{to:`/listing/${r.slug||r.id}`,className:"bg-surface border border-border rounded-2xl overflow-hidden hover:border-accent-primary/30 hover:shadow-lg hover:shadow-accent-primary/5 transition-all group",children:[e.jsx("div",{className:"aspect-video bg-surfaceHighlight overflow-hidden",children:r.image_url?e.jsx("img",{src:r.image_url,alt:r.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(u,{className:"text-textMuted",size:32})})}),e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-textMain line-clamp-1 group-hover:text-accent-primary transition-colors",children:r.title}),e.jsxs("span",{className:"text-lg font-bold text-accent-primary shrink-0",children:["₹",r.price]})]}),r.category&&e.jsx("span",{className:"text-xs text-textMuted bg-surfaceHighlight px-2 py-1 rounded mb-3 inline-block",children:r.category.name}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-textMuted mt-3 pt-3 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{size:12,className:"text-accent-primary"}),e.jsx("span",{children:r.rating_average.toFixed(1)}),e.jsxs("span",{className:"text-xs",children:["(",r.rating_count,")"]})]}),r.purchase_count>0&&e.jsxs("span",{className:"text-xs",children:[r.purchase_count,"+ sold"]}),n(r.last_sold_at)&&e.jsx("span",{className:"text-xs text-green-500",children:n(r.last_sold_at)})]})]})]},r.id))})]})]})})};export{q as default};
