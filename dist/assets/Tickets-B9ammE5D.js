import{j as e}from"./vendor-motion-Dl8lXUsH.js";import{a as b,h as c,aj as h,L as g,aB as f,E as j}from"./vendor-icons-BBHJ0ezg.js";import{u as N}from"./useTickets-DIdC8N1E.js";import{b as v,B as n}from"./index-76QHltB_.js";import{u as y,L as l}from"./vendor-react-Ojr5pEEK.js";import"./vendor-supabase-CIvuJI4W.js";import"./vendor-date-BvD7TL1z.js";const T=()=>{const d=y(),{isAuthenticated:o}=v(),[r,x]=b.useState("all"),{tickets:a,isLoading:i,error:s}=N({status:r,myTicketsOnly:!0}),m=t=>{switch(t){case"open":return"bg-blue-500/10 text-blue-400 border-blue-500/20";case"waiting":return"bg-amber-500/10 text-amber-400 border-amber-500/20";case"under_review":return"bg-purple-500/10 text-purple-400 border-purple-500/20";case"resolved":return"bg-green-500/10 text-green-400 border-green-500/20";default:return"bg-surfaceHighlight text-textMuted border-border"}},u=t=>{switch(t){case"delivery_issue":return"Delivery Issue";case"clarification":return"Clarification";case"refund_request":return"Refund Request";case"technical":return"Technical";default:return"Other"}};return o?e.jsxs("div",{className:"pt-32 pb-20 px-6 max-w-5xl mx-auto animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-display font-bold text-textMain mb-2",children:"Support Tickets"}),e.jsx("p",{className:"text-textMuted",children:"Get help with your orders and purchases"})]}),e.jsx(l,{to:"/tickets/new",children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(h,{size:16}),"New Ticket"]})})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:["all","open","waiting","under_review","resolved"].map(t=>e.jsx("button",{onClick:()=>x(t),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${r===t?"bg-accent-primary text-white":"bg-surface text-textMuted border border-border hover:bg-surfaceHighlight"}`,children:t==="all"?"All":t.replace("_"," ").replace(/\b\w/g,p=>p.toUpperCase())},t))}),i&&e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(g,{className:"animate-spin text-accent-primary",size:32})}),s&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400",children:s}),!i&&!s&&a.length===0&&e.jsxs("div",{className:"text-center py-20 bg-surface border border-border rounded-2xl",children:[e.jsx(c,{size:48,className:"mx-auto text-textMuted mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-textMain mb-2",children:"No tickets found"}),e.jsx("p",{className:"text-textMuted mb-6",children:r==="all"?"You haven't created any support tickets yet.":`No ${r.replace("_"," ")} tickets.`}),e.jsx(l,{to:"/tickets/new",children:e.jsx(n,{variant:"outline",children:"Create Your First Ticket"})})]}),!i&&!s&&a.length>0&&e.jsx("div",{className:"space-y-3",children:a.map(t=>e.jsx(l,{to:`/tickets/${t.id}`,className:"block p-5 bg-surface border border-border rounded-xl hover:border-accent-primary/30 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-mono text-textMuted",children:t.ticket_number}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium border ${m(t.status)}`,children:t.status.replace("_"," ")}),e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-surfaceHighlight text-textMuted border border-border",children:u(t.category)})]}),e.jsx("h3",{className:"font-bold text-textMain mb-1 truncate group-hover:text-accent-primary transition-colors",children:t.subject}),t.order&&e.jsxs("p",{className:"text-sm text-textMuted",children:["Order: ",t.order.order_number,t.order.listing&&` â€¢ ${t.order.listing.title}`]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-right text-xs text-textMuted",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{size:12}),new Date(t.created_at).toLocaleDateString()]})}),e.jsx(j,{size:16,className:"text-textMuted group-hover:text-accent-primary transition-colors"})]})]})},t.id))})]}):e.jsxs("div",{className:"pt-32 pb-20 px-6 min-h-[80vh] flex flex-col items-center justify-center text-center max-w-md mx-auto",children:[e.jsx(c,{size:48,className:"text-textMuted mb-6"}),e.jsx("h2",{className:"text-2xl font-display font-bold text-textMain mb-4",children:"Sign In Required"}),e.jsx("p",{className:"text-textSecondary mb-6",children:"You must be signed in to view your support tickets."}),e.jsx(n,{onClick:()=>d("/signin"),children:"Sign In"})]})};export{T as default};
